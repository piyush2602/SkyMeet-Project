<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>SkyMeet – Join / Create Meeting</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="favicon.png">

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2a7dff">
  <meta name="description" content="Lightweight WebRTC-based video conferencing application">

  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="SkyMeet">
  <link rel="apple-touch-icon" href="favicon.png">
  <style>
    /* ===== Theme variables ===== */
    :root {
      --bg-start: #e6f0ff;
      --bg-end: #f7fbff;
      --accent: #1a73e8;
      --accent-700: #1666cc;
      --card-bg: #ffffff;
      --muted: #6b7280;
      --text: #0f1724;
      --shadow-1: 0 6px 18px rgba(16, 24, 40, 0.08);
      --shadow-2: 0 12px 40px rgba(16, 24, 40, 0.10);
      --radius-lg: 14px;
      --radius-md: 10px;
      --glass: rgba(255, 255, 255, 0.7);
      font-family: Inter, "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }

    /* ===== Page layout ===== */
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100%;
      background: linear-gradient(180deg, var(--bg-start), var(--bg-end));
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      color: var(--text);
      display: flex;
      flex-direction: column;
      padding: 0;
      box-sizing: border-box;
    }

    /* Enhanced header styles */
    .app-header.enhanced {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 14px 20px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(250, 253, 255, 0.98));
      border-bottom: 1px solid rgba(26, 95, 232, 0.06);
      backdrop-filter: blur(4px);
      width: 100%;
      box-sizing: border-box;
    }

    .header-left {
      display: flex;
      align-items: center;
    }

    .brand-text .brand-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent-700);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .meeting-meta {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .clock {
      font-size: 13px;
      color: var(--muted);
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid rgba(26, 95, 232, 0.03);
      background: rgba(250, 253, 255, 0.9);
    }

    .icon-btn.header-action {
      width: 44px;
      height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      background: transparent;
      border: 1px solid rgba(26, 95, 232, 0.03);
      color: var(--accent-700);
      cursor: pointer;
      transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
    }

    .icon-btn.header-action:hover {
      transform: translateY(-3px);
      background: rgba(26, 95, 232, 0.06);
      box-shadow: 0 8px 20px rgba(18, 43, 85, 0.06);
    }

    .app {
      width: 100%;
      max-width: 1200px;
      display: flex;
      gap: 40px;
      align-items: flex-start;
      padding: 48px;
      margin: 0 auto;
    }

    /* ===== Main layout: left card + right illustration/space ===== */
    .app-main {
      width: 100%;
      display: flex;
    }

    .panel.auth-panel {
      width: 420px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(250, 250, 255, 0.95));
      border-radius: var(--radius-lg);
      padding: 28px;
      box-shadow: var(--shadow-1);
      border: 1px solid rgba(15, 23, 36, 0.03);
    }

    .panel.auth-panel h2 {
      font-size: 22px;
      margin: 0 0 6px;
      color: #06202f;
    }

    .panel.auth-panel p#userInfo {
      color: var(--muted);
      margin: 0 0 18px;
      font-size: 14px;
    }

    .panel.auth-panel h3 {
      margin-top: 18px;
      margin-bottom: 12px;
      font-size: 16px;
      color: #0b2233;
    }

    label {
      display: block;
      margin-bottom: 12px;
      font-size: 13px;
      color: #16303f;
    }

    /* ===== Inputs ===== */
    input[type="text"] {
      display: block;
      width: 100%;
      padding: 12px 14px;
      margin-top: 8px;
      border-radius: 10px;
      border: 1px solid rgba(8, 25, 46, 0.06);
      background: linear-gradient(180deg, #fff, #fbfdff);
      box-shadow: 0 2px 8px rgba(10, 23, 40, 0.03) inset;
      font-size: 14px;
      color: var(--text);
      outline: none;
      transition: box-shadow .12s ease, border-color .12s ease, transform .08s ease;
    }

    input[type="text"]::placeholder {
      color: #9aa7b3;
    }

    input[type="text"]:focus {
      border-color: var(--accent);
      box-shadow: 0 8px 30px rgba(26, 115, 232, 0.08);
      transform: translateY(-1px);
    }

    /* ===== Buttons row ===== */
    .buttons-row {
      display: flex;
      gap: 12px;
      margin-top: 18px;
      align-items: center;
    }

    .btn {
      border: 0;
      cursor: pointer;
      font-family: inherit;
      border-radius: 999px;
      padding: 12px 18px;
      font-size: 15px;
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
      box-shadow: 0 8px 20px rgba(8, 20, 40, 0.06);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn.primary {
      background: linear-gradient(180deg, var(--accent), var(--accent-700));
      color: #fff;
      padding: 12px 20px;
      box-shadow: var(--shadow-2);
    }

    .btn.primary:hover {
      transform: translateY(-3px);
    }

    .btn.secondary {
      background: transparent;
      border: 1px solid rgba(10, 30, 60, 0.06);
      color: var(--accent-700);
      padding: 10px 16px;
    }

    .btn.secondary:hover {
      background: rgba(26, 115, 232, 0.06);
      transform: translateY(-2px);
    }

    /* small subtle focus ring for accessibility */
    .btn:focus,
    input[type="text"]:focus {
      outline: 3px solid rgba(26, 115, 232, 0.12);
      outline-offset: 2px;
    }

    /* Remove underline and styling from links inside buttons */
    .btn a {
      text-decoration: none;
      color: inherit;
      display: inline-block;
    }

    .btn a:hover {
      text-decoration: none;
      color: inherit;
    }

    /* ===== Right side filler / big empty area like Zoom background or imagery placeholder ===== */
    .right-area {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 360px;
      padding: 32px;
      box-sizing: border-box;
    }

    .hero-card {
      width: 100%;
      max-width: 700px;
      height: 360px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(246, 249, 255, 0.9));
      box-shadow: var(--shadow-2);
      border: 1px solid rgba(15, 23, 36, 0.03);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      font-size: 20px;
    }

    /* ===== Small screens ===== */
    @media (max-width:980px) {
      .app {
        flex-direction: column;
        gap: 18px;
        max-width: 880px;
        margin: 0 auto;
        padding: 28px;
      }

      .video-grid {
        grid-template-columns: 1fr;
      }

      .right-area {
        padding: 0;
      }

      .panel.auth-panel {
        width: 100%;
        max-width: 720px;
      }
    }

    @media (max-width:700px) {
      .app-header.enhanced {
        padding: 10px 16px;
      }

      .brand-text .brand-title {
        font-size: 16px;
      }

      .clock {
        font-size: 12px;
        padding: 5px 8px;
      }

      .icon-btn.header-action {
        width: 40px;
        height: 40px;
      }
    }

    @media (max-width:560px) {
      body {
        overflow-x: hidden;
      }

      .app {
        padding: 0;
        gap: 0;
        min-height: calc(100vh - 56px);
        display: flex;
        align-items: stretch;
      }

      .app>div {
        width: 100%;
        display: flex;
        flex-direction: column;
      }

      .app-main {
        flex: 1;
        display: flex;
        align-items: stretch;
      }

      .app-header.enhanced {
        padding: 8px 12px;
      }

      .brand img {
        width: 28px !important;
        height: 28px !important;
      }

      .brand-text .brand-title {
        font-size: 14px;
      }

      .hero-card {
        display: none;
      }

      .right-area {
        display: none;
      }

      .panel.auth-panel {
        width: 100%;
        min-height: calc(100vh - 56px);
        padding: 24px 20px;
        margin: 0;
        box-sizing: border-box;
        border-radius: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .panel.auth-panel h2 {
        font-size: 20px;
        margin-bottom: 6px;
      }

      .panel.auth-panel h3 {
        font-size: 15px;
        margin-top: 16px;
        margin-bottom: 10px;
      }

      .panel.auth-panel p#userInfo {
        font-size: 13px;
        margin-bottom: 16px;
      }

      label {
        font-size: 12px;
        margin-bottom: 10px;
      }

      input[type="text"] {
        padding: 10px 12px;
        font-size: 14px;
      }

      .buttons-row {
        flex-direction: column;
        align-items: stretch;
        margin-top: 16px;
        gap: 10px;
      }

      .btn.primary,
      .btn.secondary {
        width: 100%;
        padding: 11px 18px;
        font-size: 14px;
      }
    }

    /* Extra small screens and PWA optimization */
    @media (max-width:400px) {
      .app {
        padding: 8px;
      }

      .panel.auth-panel {
        padding: 16px;
        border-radius: 12px;
      }

      .panel.auth-panel h2 {
        font-size: 18px;
      }

      .panel.auth-panel h3 {
        font-size: 14px;
      }

      input[type="text"] {
        padding: 9px 11px;
        font-size: 13px;
      }

      .btn {
        padding: 10px 16px;
        font-size: 13px;
      }
    }

    /* PWA standalone mode */
    @media (display-mode: standalone) {
      body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
      }

      .app {
        min-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
      }
    }

    /* Landscape mobile optimization */
    @media (max-height: 500px) and (orientation: landscape) {
      .app {
        padding: 12px;
      }

      .panel.auth-panel {
        padding: 16px;
        max-height: calc(100vh - 100px);
        overflow-y: auto;
      }

      .hero-card {
        display: none;
      }

      .right-area {
        display: none;
      }
    }
  </style>
</head>

<body>
  <header class="app-header enhanced">
    <div class="header-left">
      <div class="brand" style="display: flex; align-items: center; gap: 10px;">
        <img src="favicon.png" alt="SkyMeet" style="width: 32px; height: 32px; border-radius: 6px;">
        <div class="brand-text">
          <div class="brand-title">SkyMeet</div>
        </div>
      </div>
    </div>
    <div class="header-right">
      <div class="meeting-meta">
        <div class="clock" id="headerClock">12:38</div>
        <button class="icon-btn header-action" title="Info" id="headerInfo">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
          </svg>
        </button>
      </div>
    </div>
  </header>

  <div class="app">
    <div>
      <main class="app-main">
        <section class="panel auth-panel">
          <h2>Your Account</h2>
          <p id="userInfo">Logged in as Guest (guest@example.com)</p>

          <h3>Join or Create a Meeting</h3>

          <label>Display Name
            <input id="displayName" type="text" placeholder="Your name">
          </label>

          <label>Room ID
            <input id="roomId" type="text" placeholder="Enter room ID">
          </label>

          <div class="buttons-row">
            <button id="createRoomBtn" class="btn primary">Create Room</button>
            <button id="joinRoomBtn" class="btn secondary">Join Room</button>
            <button id="homeBtn" class="btn primary"><a href="https://skymeet-6prd.onrender.com/">Home</a></button>
          </div>
        </section>
      </main>
    </div>

    <div class="right-area" aria-hidden="true">
      <div class="hero-card">
        <div>
          <strong style="display:block;font-size:24px;color:#0b2233;margin-bottom:8px">Start or join a meeting</strong>
          <div style="max-width:520px;color:var(--muted);">Create a room and share the code with participants. When you
            join, you'll be able to enable your camera and mic and invite others.</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Keep your logic — sample localStorage wiring from your original snippet.
    let user = JSON.parse(localStorage.getItem("sky_user")) || { name: "Guest", email: "guest@example.com" };
    // show user info
    const userInfoEl = document.getElementById("userInfo");
    if (userInfoEl) userInfoEl.textContent = "Logged in as " + (user.name || 'Guest') + " (" + (user.email || '') + ")";

    function randomRoom() { return Math.random().toString(36).substring(2, 10); }

    // Update clock
    function updateClock() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const clockEl = document.getElementById('headerClock');
      if (clockEl) clockEl.textContent = `${hours}:${minutes}`;
    }
    updateClock();
    setInterval(updateClock, 1000);

    document.getElementById("createRoomBtn").onclick = () => {
      const displayName = (document.getElementById('displayName').value || user.name).trim();
      const room = randomRoom();
      localStorage.setItem("sky_meeting", JSON.stringify({ room, displayName }));
      location.href = "meeting.html";
    };

    document.getElementById("joinRoomBtn").onclick = () => {
      const displayName = (document.getElementById('displayName').value || user.name).trim();
      const room = (document.getElementById('roomId').value || '').trim();
      if (!room) return alert("Enter room ID");
      localStorage.setItem("sky_meeting", JSON.stringify({ room, displayName }));
      location.href = "meeting.html";
    };
  </script>

  <!-- PWA Registration -->
  <script src="pwa-register.js"></script>
</body>

</html>