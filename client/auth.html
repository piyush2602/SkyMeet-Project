<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SkyMeet — Welcome</title>

 
  <style>
    :root{
      --bg-1: #0b1220;           /* deep background */
      --bg-2: #0f1724;
      --panel: rgba(255,255,255,0.03);
      --card: #0f1724;
      --muted: #9aa6b2;
      --accent: #2a7dff;
      --accent-700:#185fd6;
      --danger: #ff5550;
      --glass: rgba(255,255,255,0.04);
      --radius-lg: 14px;
      --radius-md: 10px;
      --shadow-1: 0 10px 40px rgba(2,6,23,0.6);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* base */
    html,body{height:100%;margin:0}
    body{
      background: radial-gradient(1200px 400px at 10% 10%, rgba(42,125,255,0.06) 0%, transparent 8%),
                  linear-gradient(180deg, var(--bg-1), var(--bg-2));
      color:#e6f0fb;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      box-sizing:border-box;
    }

    /* container centers card like Zoom landing */
    .container{
      width:100%;
      max-width:1100px;
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:28px;
      align-items:start;
      align-content:center;
    }

    /* hero left */
    .hero{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px;
      padding:34px;
      box-shadow: var(--shadow-1);
      border: 1px solid rgba(255,255,255,0.03);
      min-height:320px;
    }

    .brand{ display:flex; align-items:center; gap:16px; justify-content:space-between; }
    .logo{
      width:64px;height:64px;border-radius:12px;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,var(--accent),var(--accent-700));
      color:#fff;font-weight:800;font-size:20px;box-shadow:0 10px 30px rgba(26,95,232,0.18);
    }

    .title{ font-size:32px; margin:0; font-weight:800; color:#fff; letter-spacing:-0.2px; }
    .subtitle{ color:var(--muted); margin:6px 0 20px 0; font-size:15px }

    /* split content vibe (left details right card) */
    .hero-inner{
      margin-top:18px;
      display:flex;
      gap:18px;
      align-items:flex-start;
    }

    .info-block{
      color:var(--muted);
      font-size:15px;
      line-height:1.5;
      max-width:720px;
    }

    
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px;
      padding:22px;
      box-shadow: 0 18px 50px rgba(2,6,23,0.55);
      border: 1px solid rgba(255,255,255,0.03);
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .card h3{ color:#fff; margin:0; font-size:18px }
    .card .small{ color:var(--muted); font-size:13px }

    label{ font-size:13px; margin-top:6px; color:var(--muted); display:block }
    input[type="text"], input[type="email"], input[type="password"]{
      width:100%; padding:12px 14px; margin-top:8px;
      border-radius:10px; border:1px solid rgba(255,255,255,0.04);
      background: rgba(255,255,255,0.02); color:#e6f0fb; font-size:14px;
      outline:none;
    }
    input::placeholder{ color: rgba(230,240,251,0.55) }
    input:focus{ box-shadow: 0 8px 26px rgba(42,125,255,0.08); border-color: rgba(42,125,255,0.14) }

    /* primary buttons */
    .big-btn{
      display:block;width:100%;padding:13px;border-radius:10px;border:none;
      background: linear-gradient(180deg,var(--accent),var(--accent-700));
      color:#fff;font-weight:700;font-size:15px;cursor:pointer;
      box-shadow: 0 12px 36px rgba(26,95,232,0.16);
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s;
    }
    .big-btn:hover{ transform: translateY(-3px) }

    .ghost-btn{
      display:block;width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);
      background: transparent;color:var(--muted);font-weight:600;font-size:14px; cursor:pointer;
    }
    .row{display:flex;gap:12px}

    .helper{display:flex;gap:10px;align-items:center}
    .helper .link{ color:var(--accent); cursor:pointer; font-weight:600 }

    .foot{ color:var(--muted); font-size:13px }

    /* modal */
    .modal-backdrop{ position:fixed; inset:0; background: rgba(2,6,23,0.6); display:none; align-items:center; justify-content:center; z-index:9999 }
    .modal{ width:420px; border-radius:12px; padding:18px; background: linear-gradient(180deg,#0b1220,#0f1724); border:1px solid rgba(255,255,255,0.03); box-shadow: 0 18px 40px rgba(2,6,23,0.6) }
    .modal h3{ margin:0 0 8px 0; color:#fff }
    .modal p{ margin:0 0 12px 0; color:var(--muted) }
    .modal .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:8px }

    .close-x{ position:absolute; right:18px; top:12px; background:transparent; border:none; color:var(--muted); font-size:18px; cursor:pointer }

    /* small responsive */
    @media (max-width:980px){
      .container{ grid-template-columns: 1fr; padding:18px; max-width:720px }
      .hero{ order:2 }
      .card{ order:1; width:100% }
    }
    @media (max-width:480px){
      body{ padding:12px }
      .logo{ width:56px; height:56px; font-size:18px }
      .title{ font-size:24px }
    }
  </style>
</head>
<body>
  <div class="container">

    <div class="hero">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div class="brand">
          <div class="logo">SM</div>
          <div>
            <h1 class="title">SkyMeet</h1>
            <div class="subtitle">Lightweight meetings</div>
          </div>
        </div>
        <div style="text-align:right;color:var(--muted)">
          <!-- small meta -->
        </div>
      </div>

      <div class="hero-inner">
        <div class="info-block">
          <p style="margin-top:0;color:var(--muted)">
            SkyMeet is a minimal WebRTC meeting demo in which we can join many participant in the same meeting room.
            Create or join meetings fast — camera and microphone controls,
            floating meeting UI and a focused meeting card are provided.
          </p>

          <ul style="color:var(--muted);margin-top:18px;line-height:1.8">
            <li>Quick create/join workflow</li>
            <li>Local mock auth in the sidebar</li>
            <li>Floating controls in the meeting (when joined)</li>
          </ul>
        </div>
      </div>
    </div>

    <aside class="card" aria-labelledby="accountCard">
      <h3 id="accountCard">Account</h3>
      <p class="small">Sign up or log in for a persistent name, or go to meeting as a guest.</p>

      <div style="margin-top:8px">
        <label for="nameInput">Name</label>
        <input id="nameInput" type="text" placeholder="Your name" />
      </div>

      <div style="display:flex;flex-direction:column;gap:10px;margin-top:12px">
        <button id="signupBtn" class="big-btn">Sign Up</button>
        <button id="loginBtn" class="ghost-btn">Log In</button>
        <button id="gotoMeetingBtn" class="ghost-btn">Go to Meeting (as Guest)</button>
      </div>

      <div style="margin-top:14px" class="helper">
        <div class="muted">Need help?</div>
        <div class="link" id="learnMore">Learn more</div>
      </div>
    </aside>
  </div>

  <!-- modal backdrop for signup/login -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-hidden="true">
    <div class="modal" role="document" id="modalCard">
      <button class="close-x" id="modalClose">&times;</button>
      <h3 id="modalTitle">Sign Up</h3>
      <p id="modalSubtitle">Create an account to keep your display name</p>

      <div id="modalForm">
        <label for="modalName">Name</label>
        <input id="modalName" type="text" placeholder="Full name" />

        <label for="modalEmail" style="margin-top:8px">Email</label>
        <input id="modalEmail" type="email" placeholder="you@example.com" />

        <label for="modalPassword" style="margin-top:8px">Password</label>
        <input id="modalPassword" type="password" placeholder="Password" />
      </div>

      <div class="actions" style="margin-top:12px;display:flex;justify-content:flex-end;gap:8px">
        <button id="modalCancel" class="ghost-btn">Cancel</button>
        <button id="modalSubmit" class="big-btn">Create</button>
      </div>
    </div>
  </div>

  <!-- Small inline JS wiring (keeps your existing behavior) -->
  <script>
/* ===== Improved Auth wiring for auth.html =====
   Replaces previous inline script. Validates Sign Up, Log In, and Guest flow.
*/

(function(){
  // Modal elements
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalTitle = document.getElementById('modalTitle');
  const modalSubtitle = document.getElementById('modalSubtitle');
  const modalName = document.getElementById('modalName');
  const modalEmail = document.getElementById('modalEmail');
  const modalPassword = document.getElementById('modalPassword');
  const modalSubmit = document.getElementById('modalSubmit');
  const modalCancel = document.getElementById('modalCancel');
  const modalClose = document.getElementById('modalClose');

  // Page controls
  const signupBtn = document.getElementById('signupBtn');
  const loginBtn = document.getElementById('loginBtn');
  const gotoMeetingBtn = document.getElementById('gotoMeetingBtn');

  const quickRoomInput = document.getElementById('quickRoomInput');
  const quickJoinBtn = document.getElementById('quickJoinBtn');
  const quickCreateBtn = document.getElementById('quickCreateBtn');
  const nameInput = document.getElementById('nameInput');

  // Utility: show modal in given mode: 'signup' or 'login'
  function openModal(mode = 'signup') {
    modalBackdrop.style.display = 'flex';
    modalBackdrop.setAttribute('aria-hidden','false');
    modalSubmit.dataset.mode = mode;

    if (mode === 'signup') {
      modalTitle.textContent = 'Sign Up';
      modalSubtitle.textContent = 'Create an account to keep your display name.';
      modalSubmit.textContent = 'Create';
      modalName.value = nameInput.value || '';
      modalEmail.value = '';
      modalPassword.value = '';
    } else {
      modalTitle.textContent = 'Log In';
      modalSubtitle.textContent = 'Enter your credentials.';
      modalSubmit.textContent = 'Log In';
      modalName.value = nameInput.value || '';
      modalEmail.value = '';
      modalPassword.value = '';
    }
    modalName.focus();
  }

  function closeModal() {
    modalBackdrop.style.display = 'none';
    modalBackdrop.setAttribute('aria-hidden','true');
  }

  modalCancel.addEventListener('click', closeModal);
  modalClose.addEventListener('click', closeModal);
  modalBackdrop.addEventListener('click', (e) => {
    if (e.target === modalBackdrop) closeModal();
  });

  // Save a user object into localStorage
  function saveUserToLocal(user) {
    localStorage.setItem('sky_user', JSON.stringify(user));
  }

  // Get stored user (single-user mock)
  function getSavedUser() {
    try {
      return JSON.parse(localStorage.getItem('sky_user') || 'null');
    } catch (e) {
      return null;
    }
  }

  // Basic email validation
  function isEmail(s) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s || '');
  }

  // Modal submit handler: handles both signup and login
  modalSubmit.addEventListener('click', async (ev) => {
    ev.preventDefault();
    const mode = modalSubmit.dataset.mode || 'signup';
    const name = (modalName.value || '').trim();
    const email = (modalEmail.value || '').trim();
    const password = (modalPassword.value || '').trim();

    if (mode === 'signup') {
      if (!name) { alert('Please enter your full name.'); modalName.focus(); return; }
      if (!email || !isEmail(email)) { alert('Please enter a valid email.'); modalEmail.focus(); return; }
      if (!password || password.length < 4) { alert('Please enter a password (min 4 characters).'); modalPassword.focus(); return; }

      const user = { id: email, name, email };
      saveUserToLocal(user);

      closeModal();
      localStorage.setItem('sky_user', JSON.stringify(user));
      setTimeout(() => { window.location.href = '/lobby'; }, 150);
      return;
    }

    if (!email || !isEmail(email)) { alert('Please enter a valid email.'); modalEmail.focus(); return; }
    if (!password) { alert('Please enter your password.'); modalPassword.focus(); return; }

    const stored = getSavedUser();
    if (!stored) {
      const ok = confirm('No account found on this browser. Would you like to create one now?');
      if (ok) { closeModal(); openModal('signup'); }
      return;
    }

    if (stored.email && stored.email.toLowerCase() === email.toLowerCase()) {
      closeModal();
      const user = { id: stored.id || email, name: stored.name || modalName.value || 'User', email };
      saveUserToLocal(user);
      setTimeout(()=> { window.location.href = '/lobby'; }, 150);
    } else {
      alert('Login failed: wrong email or no account exists for this email on this browser.');
      modalEmail.focus();
    }
  });

  // Buttons wiring
  signupBtn.addEventListener('click', () => openModal('signup'));
  loginBtn.addEventListener('click', () => openModal('login'));

  gotoMeetingBtn.addEventListener('click', () => {
    const name = (nameInput.value && nameInput.value.trim()) || 'Guest';
    const user = { id: 'guest_' + Date.now(), name, email: '' };
    saveUserToLocal(user);
    window.location.href = '/lobby';
  });

  quickJoinBtn && quickJoinBtn.addEventListener('click', () => {
    const room = quickRoomInput.value.trim();
    if (!room) return alert('Enter a Room ID to join');
    const name = (nameInput.value && nameInput.value.trim()) || 'Guest';
    saveUserToLocal({ id: 'guest_' + Date.now(), name, email: '' });
    localStorage.setItem('sky_meeting', JSON.stringify({ room, displayName: name }));
    window.location.href = '/room/' + encodeURIComponent(room);
  });

  quickCreateBtn && quickCreateBtn.addEventListener('click', () => {
    const room = Math.random().toString(36).slice(2,9);
    const name = (nameInput.value && nameInput.value.trim()) || 'Host';
    saveUserToLocal({ id: 'user_' + Date.now(), name, email: '' });
    localStorage.setItem('sky_meeting', JSON.stringify({ room, displayName: name }));
    window.location.href = '/room/' + encodeURIComponent(room);
  });

  nameInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      gotoMeetingBtn.click();
    }
  });

  document.getElementById('learnMore').addEventListener('click', () => {
    alert('SkyMeet: a minimal WebRTC demo. For production, replace local auth with a server-backed auth and database.');
  });

  (function prefillUser() {
    try {
      const u = JSON.parse(localStorage.getItem('sky_user') || 'null');
      if (u && u.name) nameInput.value = u.name;
    } catch(e){}
  })();

  console.log('Auth script loaded.');
})();
</script>
</body>
</html>
